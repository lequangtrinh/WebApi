@*
    For more information on enabling MVC for empty projects, visit https://go.microsoft.com/fwlink/?LinkID=397860
*@
@{
    Layout = null;
}
<script src="./js/Common/initialize_setting.js"></script>
<div class="container-fluid py-3 px-0">
    <div class="row">
        <div class="col-12 col-lg-10">
            <div class="card ">
                <div class="card-header pb-0 p-3">
                    <div class="d-lg-flex">
                        <div class="w-50 col-auto my-auto">
                            <div class="h-100">
                                <h6 class="mb-2">Price Services</h6>
                                <p data-languagestatic="" class="text-sm mb-0">Some text of detail sub</p>
                            </div>
                        </div>
                        <div class="ms-auto my-auto mt-1">
                            <button data-languagestatic="create_new" id="btnNewSetPriSer" class="btn bg-gradient-primary btn-sm mt-1" onclick="return CustomerGroupAddNew()">Thêm Mới</button>
                            <!-- #endregion -->
                        </div>
                    </div>
                </div>
                <div class="m-0 my-3 mobile-responsive">
                    <table id="dtContentPriceServices" class="table vt-table mb-0">
                        <thead class="hiddenCollapse">
                            <tr role="row">
                                <th class="d-none">ID</th>
                                <th data-languagestatic="no">#</th>
                                <th data-languagestatic="Image">Image</th>
                                <th data-languagestatic="name">Tên</th>
                                <th data-languagestatic="Price">Giá</th>
                                <th data-languagestatic="CreateDate">Ngày Tạo</th>
                            </tr>
                        </thead>
                        <tbody data-languagedyn="grid" id="dtContentPriceServicesBody">
                        </tbody>
                    </table>
                    <div class="card-footer p-3">
                        <div class="ui pagination menu justify-content-end" id="generalInfo_anampage">
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>
<script src='./Assests/dist/Paginationjs/paginationjs.min.js'></script>
<link href='./Assests/dist/Paginationjs/paginationjs.min.css' rel="stylesheet" />
<script type="text/javascript">
    $(document).ready(function () {
        LoadataPriceServices();
        RenderLayoutPaggin("SettingPriceSerPaggin","10");
        if(window.location.pathname==="/DashBoards"){
            $("#btnNewSetPriSer").addClass('d-none');
        }
        else{
             $("#btnNewSetPriSer").removeClass('d-none');
        }
    });
    function LoadataPriceServices(){
           AjaxLoad(url = "/api/PriceServices/LoadPriceServices"
            ,data= JSON.stringify({})
            ,async = true
            , error = function () { notiError_SW() }
            , success = function (result) {
                if (result != null && result!='') {
                    data=JSON.parse(result);
                    $('#generalInfo_anampage').pagination({
                            dataSource: data.lstPriceServicesDTO,
                            pageSize: 2,
                            autoHidePrevious: true,
                            autoHideNext: true,
                            callback: function (data, pagination) {
                                Render_Dash_Master_Price_Services("dtContentPriceServicesBody",data);
                            }
                        });
                }
            })
       };
    function Render_Dash_Master_Price_Services(id,data){
        let myNode = document.getElementById(id);
        if (myNode != null) {
            myNode.innerHTML = '';
            let stringContent = '';
            let sumPrice=0;
            if (data && data.length > 0) {
                for (let i = 0; i < data.length; i++) {
                    let item = data[i];
                    sumPrice=sumPrice+parseInt(item.Price);
                    let tr =
                        '<td class="d-none">' + item.CodeServices + '</td>'
                        + '<td class="vt-number-order"></td>'
                        + '<td>'
                        + '<div class="icon icon-shape icon-sm me-2 text-center" >'
                        + '<img class="avatar m-2" src="./Assets/img/'+item.Images+'" alt="label-image">'
                        + '</div>'
                        +'</td>'
                        + '<td><a href="#" class="ms-3 my-auto text-bold buttonEditClass">' + item.Name + '</a></td>'
                        + '<td class="text-sm text-dark">' + ConvertNumberWithCommas(item.Price) + ' VNĐ</td>'
                        + '<td data-name="date" class="text-sm text-dark">' + yyyyMMddHHMMM_ddMMyyyy(item.CreateDate) + '</td>'
                        +'<td data-name="is_show_app">'
                    stringContent = stringContent + '<tr class="vt-number" role="row">' + tr + '</tr>';
                }
            };
            localStorage.setItem("X-SumPrice",sumPrice)
            document.getElementById(id).innerHTML = stringContent;
        }
    };
</script>